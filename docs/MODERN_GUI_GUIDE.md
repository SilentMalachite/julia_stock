# モダンGUIガイド

## 概要

Julia在庫管理システムに、より使いやすく直感的なモダンGUIを実装しました。このガイドでは、新しいインターフェースの機能と使用方法について説明します。

## 主な機能

### 1. ダッシュボード
- **リアルタイム統計**: 在庫総数、在庫総額、低在庫・在庫切れアイテムの即時把握
- **ビジュアル統計カード**: アイコン付きの見やすい統計表示
- **自動更新**: 30秒ごとにデータを自動更新

### 2. 高度な検索・フィルター機能
- **リアルタイム検索**: 入力と同時に結果を絞り込み
- **カテゴリフィルター**: カテゴリ別の表示切り替え
- **複合検索**: 商品名と商品コードの同時検索

### 3. データテーブル機能
- **ソート機能**: 各列のヘッダークリックでソート
- **ページネーション**: 大量データの効率的な表示
- **視覚的ステータス表示**: 在庫切れ・低在庫の色分け表示

### 4. モーダルフォーム
- **直感的な入力**: モーダルダイアログでの在庫追加・編集
- **リアルタイムバリデーション**: 入力値の即時検証
- **エラーメッセージ**: わかりやすいエラー表示

### 5. Excel連携
- **ワンクリックインポート**: Excelファイルの簡単取り込み
- **エクスポート機能**: 現在の在庫データをExcelファイルとして出力
- **フォーマットガイド**: インポート用テンプレートの提供

## アクセス方法

### 開発サーバーの起動
```bash
julia --project=. -e "include(\"src/InventorySystem.jl\"); InventorySystem.start_server()"
```

### アクセスURL
- モダンGUI: http://localhost:8000/stocks/modern
- ホームページ: http://localhost:8000/

## 使用方法

### 1. 在庫の追加
1. 「新規登録」ボタンまたはフローティングアクションボタン（+）をクリック
2. 必要な情報を入力
3. 「保存」をクリック

### 2. 在庫の編集
1. 在庫リストの「編集」ボタンをクリック
2. 情報を更新
3. 「保存」をクリック

### 3. 在庫の削除
1. 在庫リストの「削除」ボタンをクリック
2. 確認ダイアログで「OK」をクリック

### 4. 検索・フィルター
1. 検索ボックスにキーワードを入力
2. カテゴリドロップダウンで絞り込み
3. 結果は自動的に更新

### 5. Excel操作
#### インポート
1. 「インポート」ボタンをクリック
2. Excelファイルを選択
3. 「インポート」をクリックして実行

#### エクスポート
1. 「エクスポート」ボタンをクリック
2. ファイルが自動的にダウンロード

## API仕様

### 新しいAPIエンドポイント

#### 1. ページネーション付き在庫一覧
```
GET /api/v2/stocks?page=1&limit=20&search=&category=&sortBy=updated_at&sortOrder=desc
```

#### 2. 在庫作成（バリデーション強化版）
```
POST /api/v2/stocks
Content-Type: application/json

{
  "product_code": "ABC-123",
  "product_name": "商品名",
  "category": "電子部品",
  "quantity": 100,
  "unit": "個",
  "price": 1500.50,
  "location": "A-1-1",
  "description": "説明"
}
```

#### 3. 一括更新
```
POST /api/v2/stocks/bulk-update
Content-Type: application/json

{
  "ids": [1, 2, 3],
  "updates": {
    "category": "新カテゴリ"
  }
}
```

#### 4. 詳細統計情報
```
GET /api/v2/stocks/statistics
```

## カスタマイズ

### CSSのカスタマイズ
`public/css/modern-ui.css`でスタイルをカスタマイズできます：

```css
:root {
    --primary-color: #4a90e2;  /* メインカラー */
    --secondary-color: #7b68ee; /* サブカラー */
}
```

### JavaScriptの拡張
`public/js/modern-app.js`で機能を追加できます。

## トラブルシューティング

### 問題: ページが表示されない
- サーバーが起動しているか確認
- ポート8000が使用可能か確認
- ブラウザのコンソールでエラーを確認

### 問題: データが更新されない
- APIエンドポイントの応答を確認
- ネットワークタブでリクエストを確認
- キャッシュをクリア

### 問題: モーダルが開かない
- JavaScriptエラーを確認
- Bootstrap JSが正しく読み込まれているか確認

## パフォーマンスの最適化

1. **ページネーション**: 大量データは20件ずつ表示
2. **遅延読み込み**: 必要なデータのみ取得
3. **キャッシュ**: ブラウザキャッシュの活用
4. **圧縮**: 本番環境では静的ファイルを圧縮

## セキュリティ

1. **入力検証**: サーバー側でのバリデーション
2. **SQLインジェクション対策**: パラメータ化クエリの使用
3. **XSS対策**: HTMLエスケープの実装
4. **CSRF対策**: トークンベースの保護（実装予定）